<% layout('layout') -%>
<div class="chat-container">
    <div class="chat-messages" id="chatMessages">
        <!-- Messages will be displayed here -->
    </div>
    
    <form id="chatForm" class="chat-form" enctype="multipart/form-data">
        <div class="attachment-preview" id="attachmentPreview"></div>
        <div class="input-group">
            <input type="text" id="messageInput" placeholder="Type a message..." class="message-input">
            <label for="attachment" class="attach-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="attach-icon">
                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                </svg>
            </label>
            <input type="file" id="attachment" class="file-input" multiple>
            <button type="submit" class="send-button">Send</button>
        </div>
    </form>
</div>

<style>
.chat-container {
    display: flex;
    flex-direction: column;
    height: calc(100vh - 150px);
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 20px;
    background: #f5f5f5;
    border-radius: 8px;
    margin-bottom: 20px;
}

.chat-form {
    background: white;
    padding: 10px;
    border-radius: 8px;
}

.input-group {
    display: flex;
    gap: 10px;
    align-items: center;
}

.message-input {
    flex-grow: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.file-input {
    display: none;
}

.attach-button {
    cursor: pointer;
    padding: 5px;
}

.attach-icon {
    width: 24px;
    height: 24px;
    color: #666;
}

.send-button {
    padding: 10px 20px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.attachment-preview {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 10px 0;
}

.attachment-item {
    position: relative;
    padding: 5px 25px 5px 10px;
    background: #e9ecef;
    border-radius: 4px;
    font-size: 14px;
}

.remove-attachment {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #dc3545;
    border: none;
    background: none;
    padding: 0;
    font-size: 16px;
}

 /* added CSS*/
 .message {
    margin: 10px 0;
    padding: 10px;
    background: #f1f1f1;
    border-radius: 8px;
}

.chat-image {
    max-width: 200px;
    max-height: 200px;
    margin: 10px 0;
    border-radius: 4px;
}

.file-attachment {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 10px 0;
    padding: 10px;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.file-attachment a {
    color: #007bff;
    text-decoration: none;
}

.attachment-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 5px 10px;
    background: #e9ecef;
    border-radius: 4px;
    margin: 5px 0;
}

.remove-attachment {
    background: none;
    border: none;
    color: #dc3545;
    cursor: pointer;
    font-size: 18px;
    padding: 0 5px;
}
.error-message {
    background-color: #f8d7da;
    color: #721c24;
    padding: 10px;
    margin: 10px 0;
    border-radius: 4px;
    border: 1px solid #f5c6cb;
}
</style>

