<% layout('layout') -%>
    <h1>SMS Page</h1>


    <!-- Send SMS Form -->
    <h2>Send SMS</h2>
    <form action="/sms/send" method="POST">
        <label for="to">Recipient Phone Number:</label>
        <input type="text" id="to" name="to" placeholder="Enter recipient's phone number" required>
        <br><br>

        <label for="message">Message:</label>
        <textarea id="message" name="message" required placeholder="Enter your message"></textarea>
        <br><br>

        <button type="submit">Send SMS</button>
    </form>

    <!-- Button to Trigger Popup for Incoming Messages -->
    <button onclick="showInbox()">Show Inbox</button>

    <!-- Popup (Modal) for Showing Incoming Messages -->
    <div id="inboxModal"
        style="display:none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border: 1px solid #ccc; z-index: 1000; width: 400px;">
        <h3>Incoming Messages:</h3>
        <div id="message-list"></div>
        <button onclick="closeInbox()">Close</button>
    </div>

    <!-- Optional: Background overlay for modal -->
    <div id="modalOverlay"
        style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999;">
    </div>



    <script>
        // You can dynamically update this section with new incoming messages
        const messages = [
            { from: "", body: "Inbox" },
            { from: "+1234567891", body: "Test message." },
        ];

        const inboxMessagesTextBox = document.getElementById('message-list');
        messages.forEach(message => {
            inboxMessagesTextBox.value += `From: ${message.from}\nMessage: ${message.body}\n\n`;
        });

        function showInbox() {

            document.getElementById('inboxModal').style.display = 'block';
            document.getElementById('modalOverlay').style.display = 'block';
        }

        // Function to close the inbox modal
        function closeInbox() {
            document.getElementById('inboxModal').style.display = 'none';
            document.getElementById('modalOverlay').style.display = 'none';
        }

            // Update email list
            function updateSMSList(messages) {
                console.log(messages)
                const messageList = document.querySelector('.message-list');
                if (messages.length > 0) {
                    messagesList.innerHTML = messages.map((message, index) => `
                <div class="email-item" data-index="${index}">
                    <div class="from">${message.from}</div>
                    <div class="message">${message.body}</div>
                </div>
            `).join('');
                } else {
                    messageList.innerHTML = '<div class="no-emails">No emails to display</div>';
                }
            }
    </script>